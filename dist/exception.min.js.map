{"version":3,"file":"exception.min.js","sources":["webpack:///exception.min.js"],"sourcesContent":["!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(1),r=function(){function e(){this.__ERROR_TYPE__={audio:{type:0,desc:\"音频加载\",level:1},video:{type:1,desc:\"视频加载\",level:1},script:{type:2,desc:\"js加载\",level:0},link:{type:3,desc:\"css加载\",level:0},img:{type:4,desc:\"img加载\",level:2},window:{type:5,desc:\"js runtime错误\",level:0}},this.__WWS__={url:\"http://wws.com\"},this.__ANDROID_BRAND__={SM:\"三星\",MI:\"小米\",HUA:\"华为\",OP:\"OPPO\",VV:\"vivo\"}}return e.prototype.getUserInfo=function(){var e=o.default.getUid();return{isLogin:!!e,uid:e}},e.prototype.getDeviceInfo=function(){var e=window.navigator.userAgent.toLowerCase(),t=e.match(/\\(i[^;]+;( u;)? cpu.+mac os x/)?\"ios\":\"android\",n=\"0.0.0\";try{n=\"ios\"===t?e.split(\";\")[1].match(/(\\d+)_(\\d+)_?(\\d+)?/)[0].split(\"_\").join(\".\"):e.match(/android\\W*(\\d+)\\.(\\d+)\\.?(\\d+)?/g)[0]}catch(e){}return{client:\"ontouchstart\"in window?\"h5\":\"web\",ua:e,system:t,isWeixin:e.indexOf(\"micromessenger\")>-1,isApp:e.indexOf(\"iting\")>-1,version:n}},e.prototype.getPageInfo=function(){return{url:window.location.href,title:document.title,routerLength:window.history.length}},e.prototype.getErrorInfo=function(e){var t={},n=\"\",o=\"\",r=\"loading error\",i=null,s=0,u=0;return e instanceof ErrorEvent?(n=\"window\",o=e.filename,r=e.message,i=e.error.stack,s=e.lineno,u=e.colno):(n=e.target.localName,o=e.target.src||e.target.href),Object.assign(t,this.__ERROR_TYPE__[n],{filename:o,message:r,errorStack:i,lineno:s,colno:u,t:(new Date).toLocaleString()}),t},e.prototype.serialize=function(e){var t=o.default.generateHash(),n=this.getUserInfo(),r=this.getDeviceInfo(),i=this.getPageInfo(),s=this.getErrorInfo(e);console.log(\"error ==================================== error\"),console.log({tag:t,userInfo:n,deviceInfo:r,pageInfo:i,errorInfo:s}),console.log(\"error ==================================== error\")},e.prototype.start=function(){var e=this;window.addEventListener(\"error\",function(t){return e.serialize(t),!0},!0)},e.prototype.post=function(e,t){var n=new XMLHttpRequest;n.open(\"post\",t,!0),n.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\"),n.send(e),n.onreadystatechange=function(){4===n.readyState&&n.status}},e.prototype.report=function(e){this.post(e,this.__WWS__.url)},e}();t.Exception=r,(new r).start()},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(){}return e.generateHash=function(){return this.prefix+\"_\"+(+new Date).toString(36)+Math.random().toString(36).substr(2,6)},e.getUid=function(){var e=this.getCookie((this.isDev?4:1)+\"&_token\");return e?e.split(\"&\")[0]:\"\"},e.getCookie=function(e){var t=\"\";if(document.cookie&&\"\"!==document.cookie)for(var n=document.cookie.split(\";\"),o=0;o<n.length;o++){var r=(n[o]+\"\").trim();if(r.substring(0,e.length+1)===e+\"=\"){t=decodeURIComponent(r.substring(e.length+1));break}}return t},e.prefix=\"wws\",e.isDev=location.href.indexOf(\"test\")>-1||/\\d+\\.\\d+\\.\\d+\\.\\d+/g.test(location.href),e}();t.default=o}]);"],"mappings":"AAAA","sourceRoot":""}